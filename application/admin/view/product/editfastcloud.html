{extend name="index/index"}
{block name="content"}
    <div class="page-header">
        <h5>编辑产品</h5>
    </div>
    <div class="main">
        <div class="mixbox">
            <form id="addserver" class="form-horizontal" action="{:url('product/save_fastcloud')}" method="post">
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">产品型号：</label>
                    <div class="col-md-4">
                        <input type="text" name="name" class="form-control unline title" placeholder="请输产品入型号" {notempty name="data.name"}value="{$data.name}"{/notempty}/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">产品标示：</label>
                    <div class="col-md-4">
                        <input type="text" name="title" class="form-control unline title" placeholder="请输产品入型号" {notempty name="data.title"}value="{$data.title}"{/notempty}/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">CPU参数：</label>
                    <div class="col-md-4">
                        <input type="text" name="cpu" class="form-control unline title" placeholder="cpu核数" {notempty name="data.cpu"}value="{$data.cpu}"{/notempty}/>
                    </div>
                    <label class="col-md-2 control-label" for="">CPU类型：</label>
                    <div class="col-md-4">
                        <input type="text" name="cputype" class="form-control unline title" placeholder="cpu类型" {notempty name="data.cputype"}value="{$data.cputype}"{/notempty}/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">内存参数：</label>
                    <div class="col-md-4">
                        <input type="text" name="memory" class="form-control unline title" placeholder="内存容量" {notempty name="data.memory"}value="{$data.memory}"{/notempty}/>
                    </div>
                    <label class="col-md-2 control-label" for="">内存类型：</label>
                    <div class="col-md-4">
                        <input type="text" name="memorytype" class="form-control unline title" placeholder="内存类型" {notempty name="data.memorytype"}value="{$data.memorytype}"{/notempty}/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">带宽参数：</label>
                    <div class="col-md-4">
                        <input type="text" name="bandwidth" class="form-control unline title" placeholder="带宽大小" {notempty name="data.bandwidth"}value="{$data.bandwidth}"{/notempty}/>
                    </div>
                    <label class="col-md-2 control-label" for="">带宽类型：</label>
                    <div class="col-md-4">
                        <input type="text" name="bandwidthtype" class="form-control unline title" placeholder="带宽类型" {notempty name="data.bandwidthtype"}value="{$data.bandwidthtype}"{/notempty} />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">系统盘大小：</label>
                    <div class="col-md-4">
                        <input type="text" name="systemdisk" class="form-control unline title" placeholder="系统盘大小" {notempty name="data.systemdisk"}value="{$data.systemdisk}"{/notempty}/>
                    </div>
                    <label class="col-md-2 control-label" for="">数据盘大小：</label>
                    <div class="col-md-4">
                        <input type="text" name="datadisk" class="form-control unline title" placeholder="数据盘大小" {notempty name="data.datadisk"}value="{$data.datadisk}"{/notempty}/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">IP数量：</label>
                    <div class="col-md-4">
                        <input type="text" name="ip" class="form-control unline title" placeholder="IP数量" {notempty name="data.ip"}value="{$data.ip}"{/notempty}/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">可选择的操作系统：</label>
                    <div class="checkbox col-md-4">
                        {foreach $system as $k=>$v}
                        <input class="vba-ck" type="checkbox" name="system[]" id="checkbox.{$k}" value="{$v.id}" {notempty name="data.system"}{in name="v.id" value="$data.system"} checked="checked" {/in}{/notempty}/>
                        <label class="vba-chekbox" for="checkbox.{$k}">{$v.name} {$v.version}</label>
                        {/foreach}
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">可选择的机房：</label>
                    <div class="checkbox col-md-4">
                        <select class="form-control line" name="room">
                            {foreach $room as $key=>$val}
                            <option value="{$val.id}" {notempty name="data.room"}{in name="val.id" value="$data.room"} selected {/in}{/notempty}>{$val.name}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">赠送：</label>
                    <div class="col-md-4">
                        <input type="text" name="give" class="form-control unline title" placeholder="赠送内容" {notempty name="data.give"}value="{$data.give}"{/notempty} />
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">1个月价钱：</label>
                    <div class="col-md-4">
                        <input type="text" name="month" class="form-control unline title" placeholder="请输入一个月价钱" {notempty name="price.0.time"}{eq name="price.0.time" value="month" }value="{$price.0.price}"{/eq}{/notempty} />
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">半年价钱：</label>
                    <div class="col-md-4">
                        <input type="text" name="half" class="form-control unline title" placeholder="请输入半年价钱" {notempty name="price.1.time"}{eq name="price.1.time" value="half" }value="{$price.1.price}"{/eq}{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">1年价钱：</label>
                    <div class="col-md-4">
                        <input type="text" name="year" class="form-control unline title" placeholder="请输入一年价钱" {notempty name="price.2.time"}{eq name="price.2.time" value="year" }value="{$price.2.price}"{/eq}{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">2年价钱：</label>
                    <div class="col-md-4">
                        <input type="text" name="two" class="form-control unline title" placeholder="请输入两年价钱" {notempty name="price.3.time"}{eq name="price.3.time" value="two" }value="{$price.3.price}"{/eq}{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">3年价钱：</label>
                    <div class="col-md-4">
                        <input type="text" name="three" class="form-control unline title" placeholder="请输入三年价钱" {notempty name="price.4.time"}{eq name="price.4.time" value="three" }value="{$price.4.price}"{/eq}{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">5年价钱：</label>
                    <div class="col-md-4">
                        <input type="text" name="five" class="form-control unline title" placeholder="请输入五年价钱" {notempty name="price.5.time"}{eq name="price.5.time" value="five" }value="{$price.5.price}"{/eq}{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">一级代理商返点比例：</label>
                    <div class="col-md-4">
                        <input type="text" name="agent_1" class="form-control unline title" placeholder="请输产品返点比例，例：0.05" {notempty name="data.agent_1"}value="{$data.agent_1}"{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">二级代理商返点比例：</label>
                    <div class="col-md-4">
                        <input type="text" name="agent_2" class="form-control unline title" placeholder="请输产品返点比例，例：0.05" {notempty name="data.agent_2"}value="{$data.agent_2}"{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">三级代理商返点比例：</label>
                    <div class="col-md-4">
                        <input type="text" name="agent_3" class="form-control unline title" placeholder="请输产品返点比例，例：0.05" {notempty name="data.agent_3"}value="{$data.agent_3}"{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">四级代理商返点比例：</label>
                    <div class="col-md-4">
                        <input type="text" name="agent_4" class="form-control unline title" placeholder="请输产品返点比例，例：0.05" {notempty name="data.agent_4"}value="{$data.agent_4}"{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label" for="">五级代理商返点比例：</label>
                    <div class="col-md-4">
                        <input type="text" name="agent_5" class="form-control unline title" placeholder="请输产品返点比例，例：0.05" {notempty name="data.agent_5"}value="{$data.agent_5}"{/notempty}/>
                        <label class="unline-label"></label>
                    </div>
                </div>
                <input type="hidden" name="id" {notempty name="id"} value={$id} {/notempty}>
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-4">
                        <button type="submit" class="btn btn-ces tijiao">提交</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{/block}
{block name="script"}
<script>
    $(function() {
        $('#selectTitle').initList();

        $('.select select').on('change', function() {
            if($(this).val() == '1') {
                $('.crowdGroup').removeClass('hidden');
                $('.aloneGroup').addClass('hidden');
                $('.aloneGroup').find('#hideSel').val('');
            } else {
                $('.aloneGroup').removeClass('hidden');
                $('.crowdGroup').addClass('hidden');
                $('.aloneGroup').find('#hideSel').val('');
            }
        });
    })


    $('.tijiao').click(function () {
        var formData = new FormData($('#addserver')[0]);
        $.ajax({
            url: "{:url('product/save_fastcloud')}",
            type: "post",
            data: formData,
            async: false,
            cache: false,
            contentType: false,
            processData: false,
            success: function (data) {
//                console.log(data);
                if (data['code'] == 1) {
                    alert(data.msg);
                    window.location.href = "{:url('product/fastcloud')}";
                }else {
                    alert(data.msg);
                    window.history.back(-1);
                }
            },
        });

        return false;
    })
</script>
{/block}